<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Tipirusak | Scribd Document Index</title>
  <meta name="description" content="Explore Scribd documents with summaries and download links from Tipirusak. Featuring a growing index of useful documents.">
 <link rel="icon" type="image/x-icon" href="/scrbd.png">
  <link rel="stylesheet" href="/style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
  
  <!-- Header -->
  <header>
    <div class="container">
      <div class="logo">[scrbd]</div>
      <form id="searchForm" class="search-form">
        <input
          type="text"
          name="query"
          id="searchInput"
          class="search-input"
          placeholder="type document you want to find..." />
        <button type="submit">search</button>
      </form>
    </div>
  </header>
<main>
  <h1>Thousand documents from [SCRIBD] ready to download</h1>
  <hr class="post-divider">
  <div id="results">Loading suggestions...</div>
  <div id="suggestion-section"></div>
</main>
  <!-- Footer -->
  <footer>
    <nav>
      <a href="#">ABOUT</a>
      <a href="#">CONTACT US</a>
      <a href="#">PRIVACY POLICY</a>
    </nav>
    <div class="footerdesc">
      Lorem ipsum dolor dolor kabeh ingkah kerso monggo mblebet mawon nggih. Yo piye neh lah bro. Ngene iki keadaanne.<br>
      &copy;2025 - Scrbd Document Finder
    </div>
  </footer>
<script>
    function slugify(title) {
      return title.trim()
                  .toLowerCase()
                  .replace(/\s+/g, '-')
                  .replace(/[^\w\-]/g, '');
    }

    fetch('https://raw.githubusercontent.com/zie2store/tipirusak/main/public/scrbd.csv')
      .then(response => response.text())
      .then(csvText => {
        Papa.parse(csvText, {
          header: true,
          skipEmptyLines: true,
          complete: function(results) {
            const data = results.data;

            const shuffled = data.sort(() => 0.5 - Math.random()).slice(0, 10);

            const suggestions = shuffled.map(d => {
              const slug = slugify(d.Title);
              const baseUrl = window.location.origin;
              const url = `${baseUrl}/pdf.html?document=${d.ID}#${slug}`;
              return `
                <div class="related-post">
                <div class="related-post-title">
                  <a href="${url}">
                    ${d.Title}
                  </a></div>
                  <div class="related-post-text">
                    ${d.Summary}
                    <hr class="post-divider">
                  </div>
               </div>
              `;
            }).join('');

            document.getElementById('results').innerHTML = suggestions;
          }
        });
      })
      .catch(err => {
        console.error('Error loading index:', err);
        document.getElementById('results').innerHTML = '<p>Error loading documents.</p>';
      });
  </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
<script src="/script.js"></script>
</body>
</html>
